<!DOCTYPE html>
<html lang="pt-BR">
<head>
<meta charset="UTF-8" />
<meta name="viewport" content="width=device-width, initial-scale=1.0" />
<title>Precificação • Doceria</title>
<style>
 body{font-family:Arial;background:#f6f0dd;margin:0;padding:0;}
 header{display:flex;align-items:center;gap:12px;padding:16px;background:#fff;border-bottom:1px solid #ddd;}
 header img{height:40px;}
 h1{font-size:18px;margin:0;}
 .tabs{position:fixed;bottom:0;left:0;width:100%;display:flex;justify-content:space-around;background:#fff;padding:12px 0;border-top:1px solid #ccc;}
 .tab{font-weight:bold;color:#444;cursor:pointer;}
 section{display:none;padding:20px;}
 section.active{display:block;}
 .card{background:#fff;padding:16px;border-radius:12px;margin-bottom:20px;box-shadow:0 2px 4px rgba(0,0,0,0.1);} 
 button{cursor:pointer;border:none;padding:8px 16px;border-radius:8px;background:#b88658;color:#fff;font-weight:bold;} 
 .secondary{background:#ddd;color:#333;} 
 /* Modal */
 .modal-overlay{position:fixed;top:0;left:0;width:100%;height:100%;background:rgba(0,0,0,0.45);display:none;justify-content:center;align-items:center;z-index:10;}
 .modal{background:white;padding:24px;border-radius:12px;width:90%;max-width:520px;box-shadow:0 4px 8px rgba(0,0,0,0.2);} 
 .modal h2{margin-top:0;} 
 .close-btn{background:#ccc;color:#333;} 
 .delete-btn{background:#c0392b;} 
 input{width:100%;padding:8px;border:1px solid #ccc;border-radius:6px;margin-bottom:10px;}
 .row{display:flex;gap:10px;} 
 .row > div{flex:1;} 
 .product-box{padding:14px;border-radius:12px;background:#fff;margin-bottom:12px;box-shadow:0 1px 3px rgba(0,0,0,0.1);} 
 .product-header{display:flex;justify-content:space-between;align-items:center;font-weight:bold;} 
 .product-actions{display:flex;gap:8px;margin-top:8px;} 
 .remove-x{position:absolute;top:6px;right:10px;color:#a00;font-weight:bold;cursor:pointer;} 
 .relative{position:relative;} 
</style>
</head>
<body>
<header>
 <img src="logo.png" alt="Logo" />
 <div>
   <h1>Precificação • Doceria</h1>
   <small>Calc. CMV • Markup 3x • iFood • Offline</small>
 </div>
</header>

<!-- Seções -->
<section id="custos" class="active">
 <div class="card">
   <h2>Custos Fixos</h2>
   <p>Defina custos fixos</p>
   <div class="row">
     <div><label>Aluguel</label><input id="aluguel" value="0"/></div>
     <div><label>Energia</label><input id="energia" value="0"/></div>
   </div>
   <div class="row">
     <div><label>Água</label><input id="agua" value="0"/></div>
     <div><label>Internet</label><input id="internet" value="0"/></div>
   </div>
 </div>

 <div class="card">
   <h2>Mão de Obra</h2>
   <button onclick="addPessoa()">+ Pessoa</button>
   <div id="listaPessoas"></div>
 </div>
</section>

<section id="produtos">
 <div class="card relative">
   <h2>Produtos</h2>
   <p>Cadastre seus produtos</p>
   <button onclick="novoProduto()">+ Produto</button>
   <div id="listaProdutos"></div>
 </div>
</section>

<section id="resultados">
 <div class="card">
   <h2>Resultados</h2>
   <p>Em construção...</p>
 </div>
</section>

<!-- Modal Produto -->
<div id="modalOverlay" class="modal-overlay">
 <div class="modal">
   <h2 id="modalTitulo">Novo Produto</h2>
   <input id="pNome" placeholder="Nome" />
   <div class="row">
     <div><label>Participação %</label><input id="pPart" value="0"></div>
     <div><label>Un/receita</label><input id="pUnRec" value="1"></div>
   </div>
   <div class="row">
     <div><label>Un/embalagem</label><input id="pUnEmb" value="1"></div>
     <div><label>Custo ingredientes</label><input id="pIng" value="0"></div>
   </div>
   <div class="row">
     <div><label>Custo embalagem</label><input id="pEmb" value="0"></div>
     <div><label>Tempo produção (h)</label><input id="pTempo" value="0"></div>
   </div>
   <div class="row">
     <div><label>Margem %</label><input id="pMarg" value="35"></div>
   </div>
   <button onclick="salvarProduto()">Salvar</button>
   <button class="close-btn" onclick="fecharModal()">Fechar</button>
 </div>
</div>

<script>
let produtos = [{
 nome:"Produto", part:0, unRec:1, unEmb:1, ing:0, emb:0, tempo:0, marg:35
}];
let editIndex = null;

function renderProdutos(){
 const box=document.getElementById('listaProdutos');
 box.innerHTML="";
 produtos.forEach((p,i)=>{
   const div=document.createElement('div');
   div.className="product-box relative";
   div.innerHTML=`
     <span class='remove-x' onclick='removerProduto(${i})'>×</span>
     <div class='product-header'>${p.nome}</div>
     <small>Rend.: ${p.unRec} • Embalagem: ${p.unEmb} • Tempo: ${p.tempo}h</small>
     <div class='product-actions'>
       <button onclick='editarProduto(${i})'>Editar</button>
       <button onclick='duplicarProduto(${i})'>Duplicar</button>
     </div>
   `;
   box.appendChild(div);
 });
}
renderProdutos();

function novoProduto(){ editIndex=null; abrirModal({nome:"Produto",part:0,unRec:1,unEmb:1,ing:0,emb:0,tempo:0,marg:35}); }
function editarProduto(i){ editIndex=i; abrirModal(produtos[i]); }
function duplicarProduto(i){ produtos.push({...produtos[i]}); renderProdutos(); }
function removerProduto(i){ if(confirm("Tem certeza que quer remover o item?")){ produtos.splice(i,1); renderProdutos(); } }

function abrirModal(data){
 document.getElementById('modalOverlay').style.display='flex';
 document.getElementById('pNome').value=data.nome;
 document.getElementById('pPart').value=data.part;
 document.getElementById('pUnRec').value=data.unRec;
 document.getElementById('pUnEmb').value=data.unEmb;
 document.getElementById('pIng').value=data.ing;
 document.getElementById('pEmb').value=data.emb;
 document.getElementById('pTempo').value=data.tempo;
 document.getElementById('pMarg').value=data.marg;
}

function fecharModal(){ document.getElementById('modalOverlay').style.display='none'; }

function salvarProduto(){
 const p={
   nome:document.getElementById('pNome').value,
   part:Number(document.getElementById('pPart').value),
   unRec:Number(document.getElementById('pUnRec').value),
   unEmb:Number(document.getElementById('pUnEmb').value),
   ing:Number(document.getElementById('pIng').value),
   emb:Number(document.getElementById('pEmb').value),
   tempo:Number(document.getElementById('pTempo').value),
   marg:Number(document.getElementById('pMarg').value)
 };
 if(editIndex===null) produtos.push(p); else produtos[editIndex]=p;
 fecharModal(); renderProdutos();
}

function addPessoa(){ alert("Função em construção"); }

// Navegação abas
const tabs=document.querySelectorAll('.tab');
tabs.forEach(t=>{
 t.onclick=()=>{
   document.querySelectorAll('section').forEach(s=>s.classList.remove('active'));
   document.getElementById(t.dataset.target).classList.add('active');
 };
});
</script>

<div class="tabs">
 <div class="tab" data-target="custos">Custos Fixos</div>
 <div class="tab" data-target="produtos">Produtos</div>
 <div class="tab" data-target="resultados">Resultados</div>
</div>

</body>
</html>
